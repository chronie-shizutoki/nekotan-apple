name: Code Statistics

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

permissions:
  contents: read

jobs:
  code-stats:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up Swift environment
        uses: swift-actions/setup-swift@v1
        with:
          swift-version: '6.1'
          
      - name: Install cloc
        run: brew install cloc
        
      - name: Run cloc
        run: |
          cloc --exclude-dir=.build,Package.swift,.swiftpm \
               --exclude-ext=.DS_Store \
               --not-match-f='Package.resolved' \
               .
